strict digraph G {
 {node[color=green];"Central config"} -> "User config exists?";
 "User config exists?" -> "Write user config" [label=" No"];
 "Write user config" -> {node[color=blue];"Reduction params"};
 "Reduction params" -> {node[color=red];"Prepare input JSON"};
 "User config exists?" -> "Override user config?" [label=" Yes"];
 "Override user config?" -> "Backup user config" [label=" Yes"];
 "Backup user config" -> {node[label="Write user config"];"ruc_1"};
 {node[label="Write user config"];"ruc_1"} -> {node[color=blue];"Reduction params"};
 "Override user config?" -> "Use user config";
 "Use user config" -> {node[color=blue];"Reduction params"};
 {node[color=blue];"Data File"} -> {node[color=red];"NOMAD AutoRed"};
 {node[color=green];"Output Dir."} -> {node[color=red];"NOMAD AutoRed"};
 {node[color=red];"NOMAD AutoRed"} -> {node[color=red];"Sample config"};
 {node[color=blue;label="Data File"];"df_1"} -> {node[color=red];"Sample config"};
 {node[color=red];"Sample config"} -> {node[color=green];"IPTS"};
 {node[color=red];"Sample config"} -> {node[color=blue];"Sample ID"};
 {node[color=red];"Sample config"} -> {node[color=red];"Grab char runs"};
 {node[color=green;label="Central char file"];"cf_1"} -> {node[color=red];"Grab char runs"};
 {node[color=red];"Grab char runs"} -> {node[color=green];"MTC runs"};
 {node[color=red];"Grab char runs"} -> {node[color=green];"MT runs"};
 {node[color=red];"Grab char runs"} -> {node[color=green];"Van runs"};
 {node[color=red];"Grab char runs"} -> {node[color=green];"Calib file"};
 {node[color=blue;label="Data File"];"df_2"} -> {node[color=red];"Prepare input JSON"};
 {node[color=green;label="Samle Info"];"sc_2"} -> {node[color=red];"Prepare input JSON"};
 {node[color=blue;label="Samle ID"];"sid_2"} -> {node[color=green;label="Samle Info"];"sc_2"};
 {node[color=green];"MTC runs"} -> {node[color=red];"Prepare input JSON"};
 {node[color=green];"MT runs"} -> {node[color=red];"Prepare input JSON"};
 {node[color=green];"JSON template"} -> {node[color=red];"Prepare input JSON"};
 {node[color=green];"Van runs"} -> {node[color=red];"Prepare input JSON"};
 {node[color=green];"Calib file"} -> {node[color=red];"Prepare input JSON"};
 {node[color=red];"Prepare input JSON"} -> {node[color=green];"Input JSON for TSR"};
 {node[color=green];"Input JSON for TSR"} -> {node[color=red];"TotalScatteringReduction (TSR)"};
 {node[color=red];"TotalScatteringReduction (TSR)"} -> {node[color=blue];"S(Q) wksp"};
 {node[color=blue];"S(Q) wksp"} -> "Absolute Scaled?";
 "Absolute Scaled?" -> {node[color=red];"Save S(Q)"} [label="  Yes"];
 {node[color=red];"Save S(Q)"} -> {node[color=red];"PDFFourierTransform"};
 {node[color=blue;label="Reduction params"];"rdp_1"} -> {node[color=red];"PDFFourierTransform"};
 "Absolute Scaled?" -> "Adjust PF" [label="  No"];
 "Adjust PF" -> {node[color=red];"Prepare input JSON"};
 {node[color=red];"PDFFourierTransform"} -> {node[color=blue];"Save PDF"};
 {node[color=blue];"Save PDF"} -> {node[color=red;label="Prepare input JSON"];"input_json_prep_2"};
 {node[color=green];"MTC runs"} -> {node[color=red;label="Prepare input JSON"];"input_json_prep_2"};
 {node[color=green];"MT runs"} -> {node[color=red;label="Prepare input JSON"];"input_json_prep_2"};
 {node[color=green];"Van runs"} -> {node[color=red;label="Prepare input JSON"];"input_json_prep_2"};
 {node[color=green];"Calib file"} -> {node[color=red;label="Prepare input JSON"];"input_json_prep_2"};
 {node[color=blue;label="Data File"];"df_3"} -> {node[color=red;label="Prepare input JSON"];"input_json_prep_2"};
 {node[color=green;label="JSON template"];"jt_1"} -> {node[color=red;label="Prepare input JSON"];"input_json_prep_2"};
 {node[color=green;label="Samle Info"];"sc_2"} -> {node[color=red;label="Prepare input JSON"];"input_json_prep_2"};
 {node[color=red;label="Prepare input JSON"];"input_json_prep_2"} -> {node[color=green;label="Input JSON for TSR"];"input_json_TSR"};
 {node[color=green;label="Input JSON for TSR"];"input_json_TSR"} -> {node[color=red;label="TotalScatteringReduction (TSR)"];"tsr_2"};
 {node[color=red;label="TotalScatteringReduction (TSR)"];"tsr_2"} -> {node[label="Absolute Scaled?"];"pfc_1"};
 {node[label="Absolute Scaled?"];"pfc_1"} -> "Save BbyB Bragg & S(Q)" [label=" Yes"];
 {node[label="Absolute Scaled?"];"pfc_1"} -> {node[label="Adjust PF"];"apf_1"} [label=" No"];
 {node[label="Adjust PF"];"apf_1"} -> {node[color=green;label="Input JSON for TSR"];"input_json_TSR"};
 "Save BbyB Bragg & S(Q)" -> "Merge JSONs for similar runs";
 "Merge JSONs for similar runs" -> "For all merged JSONs";
 "For all merged JSONs" -> "Sample title same as current?";
 "Sample title same as current?" -> "Run merged JSON" [label=" Yes"];
 "Sample title same as current?" -> "Merged JSON ever run before?" [label=" No"];
 "Merged JSON ever run before?" -> "For all merged JSONs" [label=" No"];
 "Merged JSON ever run before?" -> "Run merged JSON" [label=" Yes"];
 "Run merged JSON" -> "For all merged JSONs";
 "Run merged JSON" -> {node[color=red];"Merge all merged JSON to table"};
}